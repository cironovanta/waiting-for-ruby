<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Waiting for Ruby — Day counter</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#8b5cf6;--muted:#94a3b8;color-scheme:dark}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial;background:linear-gradient(180deg,#071023 0%,#071833 100%);color:#e6eef8;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:32px}
    .wrap{width:100%;max-width:920px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:18px;padding:28px;box-shadow:0 10px 30px rgba(2,6,23,0.7)}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px}
    h1{margin:0;font-size:20px;letter-spacing:0.2px}
    .big{font-size:28px;font-weight:700;color:var(--accent)}
    .sub{color:var(--muted);font-size:13px}
    .controls{display:flex;gap:8px;align-items:center}
    button{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:10px;color:inherit;cursor:pointer}
    .list{margin-top:18px;max-height:56vh;overflow:auto;padding-right:8px}
    .day{padding:10px 12px;border-radius:10px;margin-bottom:8px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));display:flex;justify-content:space-between;align-items:center}
    .day .txt{font-weight:600}
    .date{font-size:12px;color:var(--muted)}
    footer{margin-top:12px;color:var(--muted);font-size:12px}
    @media (max-width:520px){.big{font-size:20px}.wrap{padding:18px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <div class="sub">Counting since <strong>16/08/2023</strong></div>
        <div class="big" id="currentDay">day 1 of waiting for ruby's return : )</div>
        <div class="sub" id="todayDate">today</div>
      </div>
      <div class="controls">
        <button id="toggleOrder">Descending</button>
      </div>
    </header>

    <div class="list" id="list"></div>
    <footer>Each line shows: <em>day (numero) of waiting for ruby's return : )</em></footer>
  </div>

  <script>
    const startDate = new Date(2023, 7, 16);

    function startOfDay(d){ return new Date(d.getFullYear(), d.getMonth(), d.getDate()); }

    function formatDate(d){
      const dd = String(d.getDate()).padStart(2,'0');
      const mm = String(d.getMonth()+1).padStart(2,'0');
      const yyyy = d.getFullYear();
      return dd + '/' + mm + '/' + yyyy;
    }

    function buildList(descending=false){
      const listEl = document.getElementById('list');
      listEl.innerHTML='';
      const today = startOfDay(new Date());
      const s = startOfDay(startDate);
      if(today < s){
        listEl.innerHTML = '<div class="day"><div class="txt">Start date is in the future</div></div>';
        return;
      }
      const msPerDay = 24*60*60*1000;
      const diff = Math.round((today - s)/msPerDay) + 1;

      document.getElementById('currentDay').textContent = `day ${diff} of waiting for ruby's return : )`;
      document.getElementById('todayDate').textContent = `today — ${formatDate(today)}`;

      const items = [];
      for(let i=0;i<diff;i++){
        const d = new Date(s.getTime() + i*msPerDay);
        const dayNumber = i+1;
        const el = document.createElement('div');
        el.className='day';
        el.innerHTML = `<div><div class="txt">day ${dayNumber} of waiting for ruby's return : )</div><div class="date">${formatDate(d)}</div></div>`;
        items.push(el);
      }

      if(descending) items.reverse();
      for(const it of items) listEl.appendChild(it);
    }

    let descending = true;
    document.getElementById('toggleOrder').textContent = descending ? 'Descending' : 'Ascending';
    buildList(descending);

    document.getElementById('toggleOrder').addEventListener('click', ()=>{
      descending = !descending;
      document.getElementById('toggleOrder').textContent = descending ? 'Descending' : 'Ascending';
      buildList(descending);
    });

    function scheduleDailyUpdate(){
      const now = new Date();
      const msUntilMidnight = (
        new Date(now.getFullYear(), now.getMonth(), now.getDate()+1, 0, 0, 0) - now
      );
      setTimeout(()=>{
        buildList(descending);
        scheduleDailyUpdate();
      }, msUntilMidnight + 1000);
    }

    scheduleDailyUpdate();
  </script>
</body>
</html>
